"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _typeof = require("@babel/runtime/helpers/typeof");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _ava = _interopRequireDefault(require("ava"));

var yup = _interopRequireWildcard(require("yup"));

var _index = _interopRequireWildcard(require("./index"));

var _rxjs = require("rxjs");

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

// clears console
// console.log('\x1Bc')

/**
 * Type validators
 */
var boolean = yup.boolean();
var number = yup.number().required().required();
var string = yup.string().strict().required();

var object = function object(x) {
  return yup.object().shape(x);
};

var array = function array(x) {
  return yup.array().of(x);
};

var oneOf = function oneOf(x) {
  return yup.mixed().oneOf(x);
};
/**
 * Pre-test
 */


var livepeer;

_ava.default.beforeEach( /*#__PURE__*/function () {
  var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(t) {
    return _regenerator.default.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            _context.next = 2;
            return (0, _index.default)();

          case 2:
            livepeer = _context.sent;

          case 3:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));

  return function (_x) {
    return _ref.apply(this, arguments);
  };
}());
/**
 * Run tests
 */
// utils


(0, _ava.default)("should serialize profiles", function (t) {
  var a = _index.utils.serializeTranscodingProfiles(["P720p60fps16x9"]);

  var b = _index.utils.serializeTranscodingProfiles(["foo"]);

  t.is("a7ac137a", a);
  t.is("d435c53a", b);
}); // sdk snapshots

(0, _ava.default)("should initialize contracts", /*#__PURE__*/function () {
  var _ref2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(t) {
    var _yield$initContracts, contracts, snap;

    return _regenerator.default.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            _context2.next = 2;
            return (0, _index.initContracts)();

          case 2:
            _yield$initContracts = _context2.sent;
            contracts = _yield$initContracts.contracts;
            snap = Object.keys(contracts).reduce(function (a, b) {
              var c = _objectSpread({}, a); // constantly changes, so set to 0 for snapshot purposes


              c[b].query.rpc.idCounter = 0;
              return c;
            }, contracts); // TODO: unskip once contract schema is stable
            // t.skip.snapshot(snap)

            t.pass();

          case 6:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee2);
  }));

  return function (_x2) {
    return _ref2.apply(this, arguments);
  };
}());
(0, _ava.default)("should initialize SDK", /*#__PURE__*/function () {
  var _ref3 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(t) {
    var _yield$Livepeer, rpc;

    return _regenerator.default.wrap(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            _context3.next = 2;
            return (0, _index.default)();

          case 2:
            _yield$Livepeer = _context3.sent;
            rpc = _yield$Livepeer.rpc;
            // TODO: unskip once sdk rpc is stable
            // t.skip.snapshot(rpc)
            t.pass();

          case 5:
          case "end":
            return _context3.stop();
        }
      }
    }, _callee3);
  }));

  return function (_x3) {
    return _ref3.apply(this, arguments);
  };
}()); // Bonding Manager

(0, _ava.default)("should get unbonding period", /*#__PURE__*/function () {
  var _ref4 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4(t) {
    var res;
    return _regenerator.default.wrap(function _callee4$(_context4) {
      while (1) {
        switch (_context4.prev = _context4.next) {
          case 0:
            _context4.next = 2;
            return livepeer.rpc.getUnbondingPeriod();

          case 2:
            res = _context4.sent;
            t.true(string.isValidSync(res));

          case 4:
          case "end":
            return _context4.stop();
        }
      }
    }, _callee4);
  }));

  return function (_x4) {
    return _ref4.apply(this, arguments);
  };
}());
(0, _ava.default)("should get maximum earning for claims rounds", /*#__PURE__*/function () {
  var _ref5 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5(t) {
    var res;
    return _regenerator.default.wrap(function _callee5$(_context5) {
      while (1) {
        switch (_context5.prev = _context5.next) {
          case 0:
            _context5.next = 2;
            return livepeer.rpc.getMaxEarningsClaimsRounds();

          case 2:
            res = _context5.sent;
            t.true(string.isValidSync(res));

          case 4:
          case "end":
            return _context5.stop();
        }
      }
    }, _callee5);
  }));

  return function (_x5) {
    return _ref5.apply(this, arguments);
  };
}());
(0, _ava.default)("should get total bonded", /*#__PURE__*/function () {
  var _ref6 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6(t) {
    var res;
    return _regenerator.default.wrap(function _callee6$(_context6) {
      while (1) {
        switch (_context6.prev = _context6.next) {
          case 0:
            _context6.next = 2;
            return livepeer.rpc.getTotalBonded();

          case 2:
            res = _context6.sent;
            t.true(string.isValidSync(res));

          case 4:
          case "end":
            return _context6.stop();
        }
      }
    }, _callee6);
  }));

  return function (_x6) {
    return _ref6.apply(this, arguments);
  };
}());
(0, _ava.default)("should get transcoder pool max size", /*#__PURE__*/function () {
  var _ref7 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee7(t) {
    var res;
    return _regenerator.default.wrap(function _callee7$(_context7) {
      while (1) {
        switch (_context7.prev = _context7.next) {
          case 0:
            _context7.next = 2;
            return livepeer.rpc.getTranscoderPoolMaxSize();

          case 2:
            res = _context7.sent;
            t.true(string.isValidSync(res));

          case 4:
          case "end":
            return _context7.stop();
        }
      }
    }, _callee7);
  }));

  return function (_x7) {
    return _ref7.apply(this, arguments);
  };
}()); // ENS

(0, _ava.default)("should get ENS for ETH address", /*#__PURE__*/function () {
  var _ref8 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee8(t) {
    var res;
    return _regenerator.default.wrap(function _callee8$(_context8) {
      while (1) {
        switch (_context8.prev = _context8.next) {
          case 0:
            _context8.next = 2;
            return livepeer.rpc.getENSName("0x96b20f67309a0750b3fc3dcbe989f347167482ff");

          case 2:
            res = _context8.sent;
            t.true(string.isValidSync(res));

          case 4:
          case "end":
            return _context8.stop();
        }
      }
    }, _callee8);
  }));

  return function (_x8) {
    return _ref8.apply(this, arguments);
  };
}());
(0, _ava.default)("should get empty string when no ENS name address", /*#__PURE__*/function () {
  var _ref9 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee9(t) {
    var res;
    return _regenerator.default.wrap(function _callee9$(_context9) {
      while (1) {
        switch (_context9.prev = _context9.next) {
          case 0:
            _context9.next = 2;
            return livepeer.rpc.getENSName("0x0000000000000000000000000000000000000000");

          case 2:
            res = _context9.sent;
            t.true("" === res);

          case 4:
          case "end":
            return _context9.stop();
        }
      }
    }, _callee9);
  }));

  return function (_x9) {
    return _ref9.apply(this, arguments);
  };
}());
(0, _ava.default)("should get ETH address for ENS name", /*#__PURE__*/function () {
  var _ref10 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee10(t) {
    var res;
    return _regenerator.default.wrap(function _callee10$(_context10) {
      while (1) {
        switch (_context10.prev = _context10.next) {
          case 0:
            _context10.next = 2;
            return livepeer.rpc.getENSAddress("please.buymecoffee.eth");

          case 2:
            res = _context10.sent;
            t.true(string.isValidSync(res));

          case 4:
          case "end":
            return _context10.stop();
        }
      }
    }, _callee10);
  }));

  return function (_x10) {
    return _ref10.apply(this, arguments);
  };
}());
(0, _ava.default)("should get empty string for nonexistent ENS name", /*#__PURE__*/function () {
  var _ref11 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee11(t) {
    var res;
    return _regenerator.default.wrap(function _callee11$(_context11) {
      while (1) {
        switch (_context11.prev = _context11.next) {
          case 0:
            _context11.next = 2;
            return livepeer.rpc.getENSAddress("donot.buymecoffee.eth");

          case 2:
            res = _context11.sent;
            t.true("" === res);

          case 4:
          case "end":
            return _context11.stop();
        }
      }
    }, _callee11);
  }));

  return function (_x11) {
    return _ref11.apply(this, arguments);
  };
}()); // ETH

(0, _ava.default)("should get ETH balance", /*#__PURE__*/function () {
  var _ref12 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee12(t) {
    var from, res;
    return _regenerator.default.wrap(function _callee12$(_context12) {
      while (1) {
        switch (_context12.prev = _context12.next) {
          case 0:
            from = livepeer.config.defaultTx.from;
            _context12.next = 3;
            return livepeer.rpc.getEthBalance(from);

          case 3:
            res = _context12.sent;
            t.true(string.isValidSync(res));

          case 5:
          case "end":
            return _context12.stop();
        }
      }
    }, _callee12);
  }));

  return function (_x12) {
    return _ref12.apply(this, arguments);
  };
}()); // Minter

(0, _ava.default)("should return a number from getInflation()", /*#__PURE__*/function () {
  var _ref13 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee13(t) {
    var res;
    return _regenerator.default.wrap(function _callee13$(_context13) {
      while (1) {
        switch (_context13.prev = _context13.next) {
          case 0:
            _context13.next = 2;
            return livepeer.rpc.getInflation();

          case 2:
            res = _context13.sent;
            t.true(string.isValidSync(res));

          case 4:
          case "end":
            return _context13.stop();
        }
      }
    }, _callee13);
  }));

  return function (_x13) {
    return _ref13.apply(this, arguments);
  };
}());
(0, _ava.default)("should return a number from getInflationChange()", /*#__PURE__*/function () {
  var _ref14 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee14(t) {
    var res;
    return _regenerator.default.wrap(function _callee14$(_context14) {
      while (1) {
        switch (_context14.prev = _context14.next) {
          case 0:
            _context14.next = 2;
            return livepeer.rpc.getInflationChange();

          case 2:
            res = _context14.sent;
            t.true(string.isValidSync(res));

          case 4:
          case "end":
            return _context14.stop();
        }
      }
    }, _callee14);
  }));

  return function (_x14) {
    return _ref14.apply(this, arguments);
  };
}()); // Token

(0, _ava.default)("should return a number from getTokenTotalSupply()", /*#__PURE__*/function () {
  var _ref15 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee15(t) {
    var res;
    return _regenerator.default.wrap(function _callee15$(_context15) {
      while (1) {
        switch (_context15.prev = _context15.next) {
          case 0:
            _context15.next = 2;
            return livepeer.rpc.getTokenTotalSupply();

          case 2:
            res = _context15.sent;
            t.true(string.isValidSync(res));

          case 4:
          case "end":
            return _context15.stop();
        }
      }
    }, _callee15);
  }));

  return function (_x15) {
    return _ref15.apply(this, arguments);
  };
}());
(0, _ava.default)("should return a number from getTokenBalance()", /*#__PURE__*/function () {
  var _ref16 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee16(t) {
    var from, res;
    return _regenerator.default.wrap(function _callee16$(_context16) {
      while (1) {
        switch (_context16.prev = _context16.next) {
          case 0:
            from = livepeer.config.defaultTx.from;
            _context16.next = 3;
            return livepeer.rpc.getTokenBalance(from);

          case 3:
            res = _context16.sent;
            t.true(string.isValidSync(res));

          case 5:
          case "end":
            return _context16.stop();
        }
      }
    }, _callee16);
  }));

  return function (_x16) {
    return _ref16.apply(this, arguments);
  };
}());
(0, _ava.default)("should return object with correct shape from getTokenInfo()", /*#__PURE__*/function () {
  var _ref17 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee17(t) {
    var schema, from, res;
    return _regenerator.default.wrap(function _callee17$(_context17) {
      while (1) {
        switch (_context17.prev = _context17.next) {
          case 0:
            schema = object({
              totalSupply: string,
              balance: string
            });
            from = livepeer.config.defaultTx.from;
            _context17.next = 4;
            return livepeer.rpc.getTokenInfo(from);

          case 4:
            res = _context17.sent;
            schema.validateSync(res);
            t.pass();

          case 7:
          case "end":
            return _context17.stop();
        }
      }
    }, _callee17);
  }));

  return function (_x17) {
    return _ref17.apply(this, arguments);
  };
}()); // Faucet

(0, _ava.default)("should return object with correct shape from getFaucetInfo()", /*#__PURE__*/function () {
  var _ref18 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee18(t) {
    var schema, from, res;
    return _regenerator.default.wrap(function _callee18$(_context18) {
      while (1) {
        switch (_context18.prev = _context18.next) {
          case 0:
            schema = object({
              amount: string,
              wait: string,
              next: string
            });
            from = livepeer.config.defaultTx.from;
            _context18.next = 4;
            return livepeer.rpc.getFaucetInfo(from);

          case 4:
            res = _context18.sent;
            schema.validateSync(res);
            t.pass();

          case 7:
          case "end":
            return _context18.stop();
        }
      }
    }, _callee18);
  }));

  return function (_x18) {
    return _ref18.apply(this, arguments);
  };
}()); // Block

(0, _ava.default)("should return object with correct shape from getBlock()", /*#__PURE__*/function () {
  var _ref19 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee19(t) {
    var _object;

    var schema, res;
    return _regenerator.default.wrap(function _callee19$(_context19) {
      while (1) {
        switch (_context19.prev = _context19.next) {
          case 0:
            schema = object((_object = {
              number: string,
              hash: string,
              parentHash: string,
              nonce: string,
              sha3Uncles: string,
              logsBloom: string,
              transactionsRoot: string,
              stateRoot: string,
              receiptsRoot: string,
              miner: string,
              mixHash: string,
              difficulty: string,
              totalDifficulty: string,
              extraData: string,
              size: string,
              gasLimit: string,
              gasUsed: string,
              timestamp: number,
              transactions: array(object({}))
            }, (0, _defineProperty2.default)(_object, "transactionsRoot", string), (0, _defineProperty2.default)(_object, "uncles", array(string)), _object));
            _context19.next = 3;
            return livepeer.rpc.getBlock("latest");

          case 3:
            res = _context19.sent;
            schema.validateSync(res);
            t.pass();

          case 6:
          case "end":
            return _context19.stop();
        }
      }
    }, _callee19);
  }));

  return function (_x19) {
    return _ref19.apply(this, arguments);
  };
}()); // Delgator

(0, _ava.default)("should return object with correct shape from getDelegator()", /*#__PURE__*/function () {
  var _ref20 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee20(t) {
    var schema, from, res;
    return _regenerator.default.wrap(function _callee20$(_context20) {
      while (1) {
        switch (_context20.prev = _context20.next) {
          case 0:
            schema = object({
              allowance: string,
              address: string,
              bondedAmount: string,
              delegateAddress: yup.string(),
              // can be empty ('')
              delegatedAmount: string,
              fees: string,
              lastClaimRound: string,
              pendingStake: string,
              pendingFees: string,
              startRound: string,
              status: oneOf(livepeer.constants.DELEGATOR_STATUS),
              withdrawAmount: string,
              withdrawRound: string,
              nextUnbondingLockId: string
            });
            from = livepeer.config.defaultTx.from;
            _context20.next = 4;
            return livepeer.rpc.getDelegator("please.buymecoffee.eth");

          case 4:
            res = _context20.sent;
            schema.validateSync(res);
            t.pass();

          case 7:
          case "end":
            return _context20.stop();
        }
      }
    }, _callee20);
  }));

  return function (_x20) {
    return _ref20.apply(this, arguments);
  };
}());
(0, _ava.default)("should return object with correct shape from getDelegatorUnbondingLock()", /*#__PURE__*/function () {
  var _ref21 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee21(t) {
    var schema, from, res;
    return _regenerator.default.wrap(function _callee21$(_context21) {
      while (1) {
        switch (_context21.prev = _context21.next) {
          case 0:
            schema = object({
              id: string,
              delegator: string,
              amount: string,
              withdrawRound: string
            });
            from = livepeer.config.defaultTx.from;
            _context21.next = 4;
            return livepeer.rpc.getDelegatorUnbondingLock(from, "0");

          case 4:
            res = _context21.sent;
            schema.validateSync(res);
            t.pass();

          case 7:
          case "end":
            return _context21.stop();
        }
      }
    }, _callee21);
  }));

  return function (_x21) {
    return _ref21.apply(this, arguments);
  };
}());
(0, _ava.default)("should return object with correct shape from getDelegatorUnbondingLocks()", /*#__PURE__*/function () {
  var _ref22 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee22(t) {
    var schema, from, res;
    return _regenerator.default.wrap(function _callee22$(_context22) {
      while (1) {
        switch (_context22.prev = _context22.next) {
          case 0:
            schema = array(object({
              id: string,
              delegator: string,
              amount: string,
              withdrawRound: string
            }));
            from = livepeer.config.defaultTx.from;
            _context22.next = 4;
            return livepeer.rpc.getDelegatorUnbondingLocks(from);

          case 4:
            res = _context22.sent;
            schema.validateSync(res);
            t.pass();

          case 7:
          case "end":
            return _context22.stop();
        }
      }
    }, _callee22);
  }));

  return function (_x22) {
    return _ref22.apply(this, arguments);
  };
}()); // Transcoder

(0, _ava.default)("should return object with correct shape from getTranscoder()", /*#__PURE__*/function () {
  var _ref23 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee23(t) {
    var schema, from, res;
    return _regenerator.default.wrap(function _callee23$(_context23) {
      while (1) {
        switch (_context23.prev = _context23.next) {
          case 0:
            schema = object({
              address: string,
              feeShare: string,
              // %
              lastRewardRound: string,
              lastActiveStakeUpdateRound: string,
              activationRound: string,
              deactivationRound: string,
              totalStake: string,
              rewardCut: string // %

            });
            from = livepeer.config.defaultTx.from;
            _context23.next = 4;
            return livepeer.rpc.getTranscoder(from);

          case 4:
            res = _context23.sent;
            schema.validateSync(res);
            t.pass();

          case 7:
          case "end":
            return _context23.stop();
        }
      }
    }, _callee23);
  }));

  return function (_x23) {
    return _ref23.apply(this, arguments);
  };
}()); // Rounds

(0, _ava.default)("should return object with correct shape from getCurrentRoundInfo()", /*#__PURE__*/function () {
  var _ref24 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee24(t) {
    var schema, from, res;
    return _regenerator.default.wrap(function _callee24$(_context24) {
      while (1) {
        switch (_context24.prev = _context24.next) {
          case 0:
            schema = object({
              id: string,
              initialized: boolean,
              startBlock: string,
              lastInitializedRound: string,
              length: string
            });
            from = livepeer.config.defaultTx.from;
            _context24.next = 4;
            return livepeer.rpc.getCurrentRoundInfo(from);

          case 4:
            res = _context24.sent;
            schema.validateSync(res);
            t.pass();

          case 7:
          case "end":
            return _context24.stop();
        }
      }
    }, _callee24);
  }));

  return function (_x24) {
    return _ref24.apply(this, arguments);
  };
}()); // Protocol

(0, _ava.default)("should return object with correct shape from getProtocol()", /*#__PURE__*/function () {
  var _ref25 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee25(t) {
    var schema, res;
    return _regenerator.default.wrap(function _callee25$(_context25) {
      while (1) {
        switch (_context25.prev = _context25.next) {
          case 0:
            schema = object({
              paused: boolean,
              totalTokenSupply: string,
              totalBondedToken: string,
              targetBondingRate: string,
              transcoderPoolMaxSize: string,
              maxEarningsClaimsRounds: string
            });
            _context25.next = 3;
            return livepeer.rpc.getProtocol();

          case 3:
            res = _context25.sent;
            schema.validateSync(res);
            t.pass();

          case 6:
          case "end":
            return _context25.stop();
        }
      }
    }, _callee25);
  }));

  return function (_x25) {
    return _ref25.apply(this, arguments);
  };
}()); // Minter

(0, _ava.default)("should return target bonding rate", /*#__PURE__*/function () {
  var _ref26 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee26(t) {
    var res;
    return _regenerator.default.wrap(function _callee26$(_context26) {
      while (1) {
        switch (_context26.prev = _context26.next) {
          case 0:
            _context26.next = 2;
            return livepeer.rpc.getTargetBondingRate();

          case 2:
            res = _context26.sent;
            t.true(string.isValidSync(res));

          case 4:
          case "end":
            return _context26.stop();
        }
      }
    }, _callee26);
  }));

  return function (_x26) {
    return _ref26.apply(this, arguments);
  };
}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC50ZXN0LmpzIl0sIm5hbWVzIjpbImJvb2xlYW4iLCJ5dXAiLCJudW1iZXIiLCJyZXF1aXJlZCIsInN0cmluZyIsInN0cmljdCIsIm9iamVjdCIsIngiLCJzaGFwZSIsImFycmF5Iiwib2YiLCJvbmVPZiIsIm1peGVkIiwibGl2ZXBlZXIiLCJ0ZXN0IiwiYmVmb3JlRWFjaCIsInQiLCJhIiwidXRpbHMiLCJzZXJpYWxpemVUcmFuc2NvZGluZ1Byb2ZpbGVzIiwiYiIsImlzIiwiY29udHJhY3RzIiwic25hcCIsIk9iamVjdCIsImtleXMiLCJyZWR1Y2UiLCJjIiwicXVlcnkiLCJycGMiLCJpZENvdW50ZXIiLCJwYXNzIiwiZ2V0VW5ib25kaW5nUGVyaW9kIiwicmVzIiwidHJ1ZSIsImlzVmFsaWRTeW5jIiwiZ2V0TWF4RWFybmluZ3NDbGFpbXNSb3VuZHMiLCJnZXRUb3RhbEJvbmRlZCIsImdldFRyYW5zY29kZXJQb29sTWF4U2l6ZSIsImdldEVOU05hbWUiLCJnZXRFTlNBZGRyZXNzIiwiZnJvbSIsImNvbmZpZyIsImRlZmF1bHRUeCIsImdldEV0aEJhbGFuY2UiLCJnZXRJbmZsYXRpb24iLCJnZXRJbmZsYXRpb25DaGFuZ2UiLCJnZXRUb2tlblRvdGFsU3VwcGx5IiwiZ2V0VG9rZW5CYWxhbmNlIiwic2NoZW1hIiwidG90YWxTdXBwbHkiLCJiYWxhbmNlIiwiZ2V0VG9rZW5JbmZvIiwidmFsaWRhdGVTeW5jIiwiYW1vdW50Iiwid2FpdCIsIm5leHQiLCJnZXRGYXVjZXRJbmZvIiwiaGFzaCIsInBhcmVudEhhc2giLCJub25jZSIsInNoYTNVbmNsZXMiLCJsb2dzQmxvb20iLCJ0cmFuc2FjdGlvbnNSb290Iiwic3RhdGVSb290IiwicmVjZWlwdHNSb290IiwibWluZXIiLCJtaXhIYXNoIiwiZGlmZmljdWx0eSIsInRvdGFsRGlmZmljdWx0eSIsImV4dHJhRGF0YSIsInNpemUiLCJnYXNMaW1pdCIsImdhc1VzZWQiLCJ0aW1lc3RhbXAiLCJ0cmFuc2FjdGlvbnMiLCJnZXRCbG9jayIsImFsbG93YW5jZSIsImFkZHJlc3MiLCJib25kZWRBbW91bnQiLCJkZWxlZ2F0ZUFkZHJlc3MiLCJkZWxlZ2F0ZWRBbW91bnQiLCJmZWVzIiwibGFzdENsYWltUm91bmQiLCJwZW5kaW5nU3Rha2UiLCJwZW5kaW5nRmVlcyIsInN0YXJ0Um91bmQiLCJzdGF0dXMiLCJjb25zdGFudHMiLCJERUxFR0FUT1JfU1RBVFVTIiwid2l0aGRyYXdBbW91bnQiLCJ3aXRoZHJhd1JvdW5kIiwibmV4dFVuYm9uZGluZ0xvY2tJZCIsImdldERlbGVnYXRvciIsImlkIiwiZGVsZWdhdG9yIiwiZ2V0RGVsZWdhdG9yVW5ib25kaW5nTG9jayIsImdldERlbGVnYXRvclVuYm9uZGluZ0xvY2tzIiwiZmVlU2hhcmUiLCJsYXN0UmV3YXJkUm91bmQiLCJsYXN0QWN0aXZlU3Rha2VVcGRhdGVSb3VuZCIsImFjdGl2YXRpb25Sb3VuZCIsImRlYWN0aXZhdGlvblJvdW5kIiwidG90YWxTdGFrZSIsInJld2FyZEN1dCIsImdldFRyYW5zY29kZXIiLCJpbml0aWFsaXplZCIsInN0YXJ0QmxvY2siLCJsYXN0SW5pdGlhbGl6ZWRSb3VuZCIsImxlbmd0aCIsImdldEN1cnJlbnRSb3VuZEluZm8iLCJwYXVzZWQiLCJ0b3RhbFRva2VuU3VwcGx5IiwidG90YWxCb25kZWRUb2tlbiIsInRhcmdldEJvbmRpbmdSYXRlIiwidHJhbnNjb2RlclBvb2xNYXhTaXplIiwibWF4RWFybmluZ3NDbGFpbXNSb3VuZHMiLCJnZXRQcm90b2NvbCIsImdldFRhcmdldEJvbmRpbmdSYXRlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7OztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUEsSUFBTUEsT0FBTyxHQUFHQyxHQUFHLENBQUNELE9BQUosRUFBaEI7QUFDQSxJQUFNRSxNQUFNLEdBQUdELEdBQUcsQ0FBQ0MsTUFBSixHQUFhQyxRQUFiLEdB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cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHRlc3QgZnJvbSBcImF2YVwiO1xuaW1wb3J0ICogYXMgeXVwIGZyb20gXCJ5dXBcIjtcbmltcG9ydCBMaXZlcGVlciwgeyB1dGlscywgaW5pdENvbnRyYWN0cyB9IGZyb20gXCIuL2luZGV4XCI7XG5pbXBvcnQgeyBBc3luY1N1YmplY3QgfSBmcm9tIFwicnhqc1wiO1xuXG4vLyBjbGVhcnMgY29uc29sZVxuLy8gY29uc29sZS5sb2coJ1xceDFCYycpXG5cbi8qKlxuICogVHlwZSB2YWxpZGF0b3JzXG4gKi9cblxuY29uc3QgYm9vbGVhbiA9IHl1cC5ib29sZWFuKCk7XG5jb25zdCBudW1iZXIgPSB5dXAubnVtYmVyKCkucmVxdWlyZWQoKS5yZXF1aXJlZCgpO1xuY29uc3Qgc3RyaW5nID0geXVwLnN0cmluZygpLnN0cmljdCgpLnJlcXVpcmVkKCk7XG5jb25zdCBvYmplY3QgPSAoeCkgPT4geXVwLm9iamVjdCgpLnNoYXBlKHgpO1xuY29uc3QgYXJyYXkgPSAoeCkgPT4geXVwLmFycmF5KCkub2YoeCk7XG5jb25zdCBvbmVPZiA9ICh4KSA9PiB5dXAubWl4ZWQoKS5vbmVPZih4KTtcblxuLyoqXG4gKiBQcmUtdGVzdFxuICovXG5cbmxldCBsaXZlcGVlcjtcblxudGVzdC5iZWZvcmVFYWNoKGFzeW5jICh0KSA9PiB7XG4gIC8vIGNyZWF0ZSBuZXcgc2RrIGluc3RhbmNlIGJlZm9yZSBlYWNoIHRlc3RcbiAgbGl2ZXBlZXIgPSBhd2FpdCBMaXZlcGVlcigpO1xufSk7XG5cbi8qKlxuICogUnVuIHRlc3RzXG4gKi9cblxuLy8gdXRpbHNcblxudGVzdChcInNob3VsZCBzZXJpYWxpemUgcHJvZmlsZXNcIiwgKHQpID0+IHtcbiAgY29uc3QgYSA9IHV0aWxzLnNlcmlhbGl6ZVRyYW5zY29kaW5nUHJvZmlsZXMoW1wiUDcyMHA2MGZwczE2eDlcIl0pO1xuICBjb25zdCBiID0gdXRpbHMuc2VyaWFsaXplVHJhbnNjb2RpbmdQcm9maWxlcyhbXCJmb29cIl0pO1xuICB0LmlzKFwiYTdhYzEzN2FcIiwgYSk7XG4gIHQuaXMoXCJkNDM1YzUzYVwiLCBiKTtcbn0pO1xuXG4vLyBzZGsgc25hcHNob3RzXG5cbnRlc3QoXCJzaG91bGQgaW5pdGlhbGl6ZSBjb250cmFjdHNcIiwgYXN5bmMgKHQpID0+IHtcbiAgY29uc3QgeyBjb250cmFjdHMgfSA9IGF3YWl0IGluaXRDb250cmFjdHMoKTtcbiAgY29uc3Qgc25hcCA9IE9iamVjdC5rZXlzKGNvbnRyYWN0cykucmVkdWNlKChhLCBiKSA9PiB7XG4gICAgY29uc3QgYyA9IHtcbiAgICAgIC4uLmEsXG4gICAgfTtcbiAgICAvLyBjb25zdGFudGx5IGNoYW5nZXMsIHNvIHNldCB0byAwIGZvciBzbmFwc2hvdCBwdXJwb3Nlc1xuICAgIGNbYl0ucXVlcnkucnBjLmlkQ291bnRlciA9IDA7XG4gICAgcmV0dXJuIGM7XG4gIH0sIGNvbnRyYWN0cyk7XG4gIC8vIFRPRE86IHVuc2tpcCBvbmNlIGNvbnRyYWN0IHNjaGVtYSBpcyBzdGFibGVcbiAgLy8gdC5za2lwLnNuYXBzaG90KHNuYXApXG4gIHQucGFzcygpO1xufSk7XG5cbnRlc3QoXCJzaG91bGQgaW5pdGlhbGl6ZSBTREtcIiwgYXN5bmMgKHQpID0+IHtcbiAgY29uc3QgeyBycGMgfSA9IGF3YWl0IExpdmVwZWVyKCk7XG4gIC8vIFRPRE86IHVuc2tpcCBvbmNlIHNkayBycGMgaXMgc3RhYmxlXG4gIC8vIHQuc2tpcC5zbmFwc2hvdChycGMpXG4gIHQucGFzcygpO1xufSk7XG5cbi8vIEJvbmRpbmcgTWFuYWdlclxuXG50ZXN0KFwic2hvdWxkIGdldCB1bmJvbmRpbmcgcGVyaW9kXCIsIGFzeW5jICh0KSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGxpdmVwZWVyLnJwYy5nZXRVbmJvbmRpbmdQZXJpb2QoKTtcbiAgdC50cnVlKHN0cmluZy5pc1ZhbGlkU3luYyhyZXMpKTtcbn0pO1xuXG50ZXN0KFwic2hvdWxkIGdldCBtYXhpbXVtIGVhcm5pbmcgZm9yIGNsYWltcyByb3VuZHNcIiwgYXN5bmMgKHQpID0+IHtcbiAgY29uc3QgcmVzID0gYXdhaXQgbGl2ZXBlZXIucnBjLmdldE1heEVhcm5pbmdzQ2xhaW1zUm91bmRzKCk7XG4gIHQudHJ1ZShzdHJpbmcuaXNWYWxpZFN5bmMocmVzKSk7XG59KTtcblxudGVzdChcInNob3VsZCBnZXQgdG90YWwgYm9uZGVkXCIsIGFzeW5jICh0KSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGxpdmVwZWVyLnJwYy5nZXRUb3RhbEJvbmRlZCgpO1xuICB0LnRydWUoc3RyaW5nLmlzVmFsaWRTeW5jKHJlcykpO1xufSk7XG5cbnRlc3QoXCJzaG91bGQgZ2V0IHRyYW5zY29kZXIgcG9vbCBtYXggc2l6ZVwiLCBhc3luYyAodCkgPT4ge1xuICBjb25zdCByZXMgPSBhd2FpdCBsaXZlcGVlci5ycGMuZ2V0VHJhbnNjb2RlclBvb2xNYXhTaXplKCk7XG4gIHQudHJ1ZShzdHJpbmcuaXNWYWxpZFN5bmMocmVzKSk7XG59KTtcblxuLy8gRU5TXG5cbnRlc3QoXCJzaG91bGQgZ2V0IEVOUyBmb3IgRVRIIGFkZHJlc3NcIiwgYXN5bmMgKHQpID0+IHtcbiAgY29uc3QgcmVzID0gYXdhaXQgbGl2ZXBlZXIucnBjLmdldEVOU05hbWUoXG4gICAgXCIweDk2YjIwZjY3MzA5YTA3NTBiM2ZjM2RjYmU5ODlmMzQ3MTY3NDgyZmZcIlxuICApO1xuICB0LnRydWUoc3RyaW5nLmlzVmFsaWRTeW5jKHJlcykpO1xufSk7XG5cbnRlc3QoXCJzaG91bGQgZ2V0IGVtcHR5IHN0cmluZyB3aGVuIG5vIEVOUyBuYW1lIGFkZHJlc3NcIiwgYXN5bmMgKHQpID0+IHtcbiAgY29uc3QgcmVzID0gYXdhaXQgbGl2ZXBlZXIucnBjLmdldEVOU05hbWUoXG4gICAgXCIweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIlxuICApO1xuICB0LnRydWUoXCJcIiA9PT0gcmVzKTtcbn0pO1xuXG50ZXN0KFwic2hvdWxkIGdldCBFVEggYWRkcmVzcyBmb3IgRU5TIG5hbWVcIiwgYXN5bmMgKHQpID0+IHtcbiAgY29uc3QgcmVzID0gYXdhaXQgbGl2ZXBlZXIucnBjLmdldEVOU0FkZHJlc3MoXCJwbGVhc2UuYnV5bWVjb2ZmZWUuZXRoXCIpO1xuICB0LnRydWUoc3RyaW5nLmlzVmFsaWRTeW5jKHJlcykpO1xufSk7XG5cbnRlc3QoXCJzaG91bGQgZ2V0IGVtcHR5IHN0cmluZyBmb3Igbm9uZXhpc3RlbnQgRU5TIG5hbWVcIiwgYXN5bmMgKHQpID0+IHtcbiAgY29uc3QgcmVzID0gYXdhaXQgbGl2ZXBlZXIucnBjLmdldEVOU0FkZHJlc3MoXCJkb25vdC5idXltZWNvZmZlZS5ldGhcIik7XG4gIHQudHJ1ZShcIlwiID09PSByZXMpO1xufSk7XG5cbi8vIEVUSFxuXG50ZXN0KFwic2hvdWxkIGdldCBFVEggYmFsYW5jZVwiLCBhc3luYyAodCkgPT4ge1xuICBjb25zdCB7IGZyb20gfSA9IGxpdmVwZWVyLmNvbmZpZy5kZWZhdWx0VHg7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGxpdmVwZWVyLnJwYy5nZXRFdGhCYWxhbmNlKGZyb20pO1xuICB0LnRydWUoc3RyaW5nLmlzVmFsaWRTeW5jKHJlcykpO1xufSk7XG5cbi8vIE1pbnRlclxuXG50ZXN0KFwic2hvdWxkIHJldHVybiBhIG51bWJlciBmcm9tIGdldEluZmxhdGlvbigpXCIsIGFzeW5jICh0KSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGxpdmVwZWVyLnJwYy5nZXRJbmZsYXRpb24oKTtcbiAgdC50cnVlKHN0cmluZy5pc1ZhbGlkU3luYyhyZXMpKTtcbn0pO1xuXG50ZXN0KFwic2hvdWxkIHJldHVybiBhIG51bWJlciBmcm9tIGdldEluZmxhdGlvbkNoYW5nZSgpXCIsIGFzeW5jICh0KSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGxpdmVwZWVyLnJwYy5nZXRJbmZsYXRpb25DaGFuZ2UoKTtcbiAgdC50cnVlKHN0cmluZy5pc1ZhbGlkU3luYyhyZXMpKTtcbn0pO1xuXG4vLyBUb2tlblxuXG50ZXN0KFwic2hvdWxkIHJldHVybiBhIG51bWJlciBmcm9tIGdldFRva2VuVG90YWxTdXBwbHkoKVwiLCBhc3luYyAodCkgPT4ge1xuICBjb25zdCByZXMgPSBhd2FpdCBsaXZlcGVlci5ycGMuZ2V0VG9rZW5Ub3RhbFN1cHBseSgpO1xuICB0LnRydWUoc3RyaW5nLmlzVmFsaWRTeW5jKHJlcykpO1xufSk7XG5cbnRlc3QoXCJzaG91bGQgcmV0dXJuIGEgbnVtYmVyIGZyb20gZ2V0VG9rZW5CYWxhbmNlKClcIiwgYXN5bmMgKHQpID0+IHtcbiAgY29uc3QgeyBmcm9tIH0gPSBsaXZlcGVlci5jb25maWcuZGVmYXVsdFR4O1xuICBjb25zdCByZXMgPSBhd2FpdCBsaXZlcGVlci5ycGMuZ2V0VG9rZW5CYWxhbmNlKGZyb20pO1xuICB0LnRydWUoc3RyaW5nLmlzVmFsaWRTeW5jKHJlcykpO1xufSk7XG5cbnRlc3QoXCJzaG91bGQgcmV0dXJuIG9iamVjdCB3aXRoIGNvcnJlY3Qgc2hhcGUgZnJvbSBnZXRUb2tlbkluZm8oKVwiLCBhc3luYyAodCkgPT4ge1xuICBjb25zdCBzY2hlbWEgPSBvYmplY3Qoe1xuICAgIHRvdGFsU3VwcGx5OiBzdHJpbmcsXG4gICAgYmFsYW5jZTogc3RyaW5nLFxuICB9KTtcbiAgY29uc3QgeyBmcm9tIH0gPSBsaXZlcGVlci5jb25maWcuZGVmYXVsdFR4O1xuICBjb25zdCByZXMgPSBhd2FpdCBsaXZlcGVlci5ycGMuZ2V0VG9rZW5JbmZvKGZyb20pO1xuICBzY2hlbWEudmFsaWRhdGVTeW5jKHJlcyk7XG4gIHQucGFzcygpO1xufSk7XG5cbi8vIEZhdWNldFxuXG50ZXN0KFwic2hvdWxkIHJldHVybiBvYmplY3Qgd2l0aCBjb3JyZWN0IHNoYXBlIGZyb20gZ2V0RmF1Y2V0SW5mbygpXCIsIGFzeW5jICh0KSA9PiB7XG4gIGNvbnN0IHNjaGVtYSA9IG9iamVjdCh7XG4gICAgYW1vdW50OiBzdHJpbmcsXG4gICAgd2FpdDogc3RyaW5nLFxuICAgIG5leHQ6IHN0cmluZyxcbiAgfSk7XG4gIGNvbnN0IHsgZnJvbSB9ID0gbGl2ZXBlZXIuY29uZmlnLmRlZmF1bHRUeDtcbiAgY29uc3QgcmVzID0gYXdhaXQgbGl2ZXBlZXIucnBjLmdldEZhdWNldEluZm8oZnJvbSk7XG4gIHNjaGVtYS52YWxpZGF0ZVN5bmMocmVzKTtcbiAgdC5wYXNzKCk7XG59KTtcblxuLy8gQmxvY2tcblxudGVzdChcInNob3VsZCByZXR1cm4gb2JqZWN0IHdpdGggY29ycmVjdCBzaGFwZSBmcm9tIGdldEJsb2NrKClcIiwgYXN5bmMgKHQpID0+IHtcbiAgY29uc3Qgc2NoZW1hID0gb2JqZWN0KHtcbiAgICBudW1iZXI6IHN0cmluZyxcbiAgICBoYXNoOiBzdHJpbmcsXG4gICAgcGFyZW50SGFzaDogc3RyaW5nLFxuICAgIG5vbmNlOiBzdHJpbmcsXG4gICAgc2hhM1VuY2xlczogc3RyaW5nLFxuICAgIGxvZ3NCbG9vbTogc3RyaW5nLFxuICAgIHRyYW5zYWN0aW9uc1Jvb3Q6IHN0cmluZyxcbiAgICBzdGF0ZVJvb3Q6IHN0cmluZyxcbiAgICByZWNlaXB0c1Jvb3Q6IHN0cmluZyxcbiAgICBtaW5lcjogc3RyaW5nLFxuICAgIG1peEhhc2g6IHN0cmluZyxcbiAgICBkaWZmaWN1bHR5OiBzdHJpbmcsXG4gICAgdG90YWxEaWZmaWN1bHR5OiBzdHJpbmcsXG4gICAgZXh0cmFEYXRhOiBzdHJpbmcsXG4gICAgc2l6ZTogc3RyaW5nLFxuICAgIGdhc0xpbWl0OiBzdHJpbmcsXG4gICAgZ2FzVXNlZDogc3RyaW5nLFxuICAgIHRpbWVzdGFtcDogbnVtYmVyLFxuICAgIHRyYW5zYWN0aW9uczogYXJyYXkob2JqZWN0KHt9KSksXG4gICAgdHJhbnNhY3Rpb25zUm9vdDogc3RyaW5nLFxuICAgIHVuY2xlczogYXJyYXkoc3RyaW5nKSxcbiAgfSk7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGxpdmVwZWVyLnJwYy5nZXRCbG9jayhcImxhdGVzdFwiKTtcbiAgc2NoZW1hLnZhbGlkYXRlU3luYyhyZXMpO1xuICB0LnBhc3MoKTtcbn0pO1xuXG4vLyBEZWxnYXRvclxuXG50ZXN0KFwic2hvdWxkIHJldHVybiBvYmplY3Qgd2l0aCBjb3JyZWN0IHNoYXBlIGZyb20gZ2V0RGVsZWdhdG9yKClcIiwgYXN5bmMgKHQpID0+IHtcbiAgY29uc3Qgc2NoZW1hID0gb2JqZWN0KHtcbiAgICBhbGxvd2FuY2U6IHN0cmluZyxcbiAgICBhZGRyZXNzOiBzdHJpbmcsXG4gICAgYm9uZGVkQW1vdW50OiBzdHJpbmcsXG4gICAgZGVsZWdhdGVBZGRyZXNzOiB5dXAuc3RyaW5nKCksIC8vIGNhbiBiZSBlbXB0eSAoJycpXG4gICAgZGVsZWdhdGVkQW1vdW50OiBzdHJpbmcsXG4gICAgZmVlczogc3RyaW5nLFxuICAgIGxhc3RDbGFpbVJvdW5kOiBzdHJpbmcsXG4gICAgcGVuZGluZ1N0YWtlOiBzdHJpbmcsXG4gICAgcGVuZGluZ0ZlZXM6IHN0cmluZyxcbiAgICBzdGFydFJvdW5kOiBzdHJpbmcsXG4gICAgc3RhdHVzOiBvbmVPZihsaXZlcGVlci5jb25zdGFudHMuREVMRUdBVE9SX1NUQVRVUyksXG4gICAgd2l0aGRyYXdBbW91bnQ6IHN0cmluZyxcbiAgICB3aXRoZHJhd1JvdW5kOiBzdHJpbmcsXG4gICAgbmV4dFVuYm9uZGluZ0xvY2tJZDogc3RyaW5nLFxuICB9KTtcbiAgY29uc3QgeyBmcm9tIH0gPSBsaXZlcGVlci5jb25maWcuZGVmYXVsdFR4O1xuICBjb25zdCByZXMgPSBhd2FpdCBsaXZlcGVlci5ycGMuZ2V0RGVsZWdhdG9yKFwicGxlYXNlLmJ1eW1lY29mZmVlLmV0aFwiKTtcbiAgc2NoZW1hLnZhbGlkYXRlU3luYyhyZXMpO1xuICB0LnBhc3MoKTtcbn0pO1xuXG50ZXN0KFwic2hvdWxkIHJldHVybiBvYmplY3Qgd2l0aCBjb3JyZWN0IHNoYXBlIGZyb20gZ2V0RGVsZWdhdG9yVW5ib25kaW5nTG9jaygpXCIsIGFzeW5jICh0KSA9PiB7XG4gIGNvbnN0IHNjaGVtYSA9IG9iamVjdCh7XG4gICAgaWQ6IHN0cmluZyxcbiAgICBkZWxlZ2F0b3I6IHN0cmluZyxcbiAgICBhbW91bnQ6IHN0cmluZyxcbiAgICB3aXRoZHJhd1JvdW5kOiBzdHJpbmcsXG4gIH0pO1xuICBjb25zdCB7IGZyb20gfSA9IGxpdmVwZWVyLmNvbmZpZy5kZWZhdWx0VHg7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGxpdmVwZWVyLnJwYy5nZXREZWxlZ2F0b3JVbmJvbmRpbmdMb2NrKGZyb20sIFwiMFwiKTtcbiAgc2NoZW1hLnZhbGlkYXRlU3luYyhyZXMpO1xuICB0LnBhc3MoKTtcbn0pO1xuXG50ZXN0KFwic2hvdWxkIHJldHVybiBvYmplY3Qgd2l0aCBjb3JyZWN0IHNoYXBlIGZyb20gZ2V0RGVsZWdhdG9yVW5ib25kaW5nTG9ja3MoKVwiLCBhc3luYyAodCkgPT4ge1xuICBjb25zdCBzY2hlbWEgPSBhcnJheShcbiAgICBvYmplY3Qoe1xuICAgICAgaWQ6IHN0cmluZyxcbiAgICAgIGRlbGVnYXRvcjogc3RyaW5nLFxuICAgICAgYW1vdW50OiBzdHJpbmcsXG4gICAgICB3aXRoZHJhd1JvdW5kOiBzdHJpbmcsXG4gICAgfSlcbiAgKTtcbiAgY29uc3QgeyBmcm9tIH0gPSBsaXZlcGVlci5jb25maWcuZGVmYXVsdFR4O1xuICBjb25zdCByZXMgPSBhd2FpdCBsaXZlcGVlci5ycGMuZ2V0RGVsZWdhdG9yVW5ib25kaW5nTG9ja3MoZnJvbSk7XG4gIHNjaGVtYS52YWxpZGF0ZVN5bmMocmVzKTtcbiAgdC5wYXNzKCk7XG59KTtcblxuLy8gVHJhbnNjb2RlclxuXG50ZXN0KFwic2hvdWxkIHJldHVybiBvYmplY3Qgd2l0aCBjb3JyZWN0IHNoYXBlIGZyb20gZ2V0VHJhbnNjb2RlcigpXCIsIGFzeW5jICh0KSA9PiB7XG4gIGNvbnN0IHNjaGVtYSA9IG9iamVjdCh7XG4gICAgYWRkcmVzczogc3RyaW5nLFxuICAgIGZlZVNoYXJlOiBzdHJpbmcsIC8vICVcbiAgICBsYXN0UmV3YXJkUm91bmQ6IHN0cmluZyxcbiAgICBsYXN0QWN0aXZlU3Rha2VVcGRhdGVSb3VuZDogc3RyaW5nLFxuICAgIGFjdGl2YXRpb25Sb3VuZDogc3RyaW5nLFxuICAgIGRlYWN0aXZhdGlvblJvdW5kOiBzdHJpbmcsXG4gICAgdG90YWxTdGFrZTogc3RyaW5nLFxuICAgIHJld2FyZEN1dDogc3RyaW5nLCAvLyAlXG4gIH0pO1xuICBjb25zdCB7IGZyb20gfSA9IGxpdmVwZWVyLmNvbmZpZy5kZWZhdWx0VHg7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGxpdmVwZWVyLnJwYy5nZXRUcmFuc2NvZGVyKGZyb20pO1xuICBzY2hlbWEudmFsaWRhdGVTeW5jKHJlcyk7XG4gIHQucGFzcygpO1xufSk7XG5cbi8vIFJvdW5kc1xuXG50ZXN0KFwic2hvdWxkIHJldHVybiBvYmplY3Qgd2l0aCBjb3JyZWN0IHNoYXBlIGZyb20gZ2V0Q3VycmVudFJvdW5kSW5mbygpXCIsIGFzeW5jICh0KSA9PiB7XG4gIGNvbnN0IHNjaGVtYSA9IG9iamVjdCh7XG4gICAgaWQ6IHN0cmluZyxcbiAgICBpbml0aWFsaXplZDogYm9vbGVhbixcbiAgICBzdGFydEJsb2NrOiBzdHJpbmcsXG4gICAgbGFzdEluaXRpYWxpemVkUm91bmQ6IHN0cmluZyxcbiAgICBsZW5ndGg6IHN0cmluZyxcbiAgfSk7XG4gIGNvbnN0IHsgZnJvbSB9ID0gbGl2ZXBlZXIuY29uZmlnLmRlZmF1bHRUeDtcbiAgY29uc3QgcmVzID0gYXdhaXQgbGl2ZXBlZXIucnBjLmdldEN1cnJlbnRSb3VuZEluZm8oZnJvbSk7XG4gIHNjaGVtYS52YWxpZGF0ZVN5bmMocmVzKTtcbiAgdC5wYXNzKCk7XG59KTtcblxuLy8gUHJvdG9jb2xcblxudGVzdChcInNob3VsZCByZXR1cm4gb2JqZWN0IHdpdGggY29ycmVjdCBzaGFwZSBmcm9tIGdldFByb3RvY29sKClcIiwgYXN5bmMgKHQpID0+IHtcbiAgY29uc3Qgc2NoZW1hID0gb2JqZWN0KHtcbiAgICBwYXVzZWQ6IGJvb2xlYW4sXG4gICAgdG90YWxUb2tlblN1cHBseTogc3RyaW5nLFxuICAgIHRvdGFsQm9uZGVkVG9rZW46IHN0cmluZyxcbiAgICB0YXJnZXRCb25kaW5nUmF0ZTogc3RyaW5nLFxuICAgIHRyYW5zY29kZXJQb29sTWF4U2l6ZTogc3RyaW5nLFxuICAgIG1heEVhcm5pbmdzQ2xhaW1zUm91bmRzOiBzdHJpbmcsXG4gIH0pO1xuICBjb25zdCByZXMgPSBhd2FpdCBsaXZlcGVlci5ycGMuZ2V0UHJvdG9jb2woKTtcbiAgc2NoZW1hLnZhbGlkYXRlU3luYyhyZXMpO1xuICB0LnBhc3MoKTtcbn0pO1xuXG4vLyBNaW50ZXJcblxudGVzdChcInNob3VsZCByZXR1cm4gdGFyZ2V0IGJvbmRpbmcgcmF0ZVwiLCBhc3luYyAodCkgPT4ge1xuICBjb25zdCByZXMgPSBhd2FpdCBsaXZlcGVlci5ycGMuZ2V0VGFyZ2V0Qm9uZGluZ1JhdGUoKTtcbiAgdC50cnVlKHN0cmluZy5pc1ZhbGlkU3luYyhyZXMpKTtcbn0pO1xuIl19